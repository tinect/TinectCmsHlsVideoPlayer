(window.webpackJsonp=window.webpackJsonp||[]).push([["tinect-cms-hls-video-player"],{U6dU:function(e,t,n){"use strict";n.r(t);var r=n("FGIj"),o=n("gHbT");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"loadJavaScriptFile",value:function(e){return new Promise((function(t,n){var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=t,r.onerror=n,document.head.appendChild(r)}))}},{key:"loadExternalModule",value:function(e,t){if(window[e])"function"==typeof t&&t();else if(window.tinectLazyloadJavascripts){var n=window.tinectLazyloadJavascripts[e];n?this.loadJavaScriptFile(n).then((function(){window[e]?"function"==typeof t&&t():console.error("Module cannot be loaded",e)})).catch((function(t){console.error("There was an error loading the external javascript file",e,t)})):console.error("There is no url set for module",e)}else console.error("Variable tinectLazyloadJavascripts missing",e)}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y,v,d,b=function(e){function t(){return u(this,t),s(this,f(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){var e=this,t=this;i.loadExternalModule("Plyr",(function(){o.a.hasAttribute(t.el,"data-playlist")?i.loadExternalModule("Hls",(function(){t._install(t.el,(function(t){e._registerHls(t)}))})):t._install(t.el,(function(t){e._register(t)}))}))}},{key:"_install",value:function(e,t){new IntersectionObserver((function(e,n){e.forEach((function(e){e.intersectionRatio<=0||(n.unobserve(e.target),t(e.target))}))})).observe(e)}},{key:"_registerHls",value:function(e){var t=this,n=t._generateOptions(e),r=o.a.getDataAttribute(e,"playlist",!1);if(Hls.isSupported()){var a={capLevelToPlayerSize:!0};"none"===o.a.getAttribute(e,"preload",!1)&&(a.autoStartLoad=!1);var i=new Hls(a);i.loadSource(r),i.attachMedia(e),i.currentLevel=-1;var l=null;i.on(Hls.Events.MANIFEST_PARSED,(function(){var r=i.levels.map((function(e){return e.height}));r.unshift(0),n.quality={default:0,options:r,forced:!0,onChange:function(e){t.updateQuality(i,e)}},i.currentLevel=-1,t.initPlayer(e,n).on("play",(function(){i.startLoad()})),(l=document.querySelector(".plyr__controls [data-plyr='quality'][value='0'] span")).innerHTML="Auto"})),i.on(Hls.Events.LEVEL_SWITCHED,(function(e,t){if(l)if(i.autoLevelEnabled){var n=i.levels[t.level].height;l.innerHTML="Auto ("+n+"p)"}else l.innerHTML="Auto"}))}else e.src=r,t.initPlayer(e,n)}},{key:"_register",value:function(e){var t=this._generateOptions(e);this.initPlayer(e,t)}},{key:"_generateOptions",value:function(e){var t={controls:["play-large"]};return o.a.hasAttribute(e,"autoplay")&&(e.removeAttribute("preload"),t.autoplay=!0),o.a.hasAttribute(e,"loop")&&(t.loop={active:!1}),t}},{key:"initPlayer",value:function(e,t){return new Plyr(e,t)}},{key:"updateQuality",value:function(e,t){0===t?e.currentLevel=-1:e.levels.forEach((function(n,r){n.height===t&&(e.currentLevel=r)}))}}])&&c(n.prototype,r),a&&c(n,a),t}(r.a);d={},(v="options")in(y=b)?Object.defineProperty(y,v,{value:d,enumerable:!0,configurable:!0,writable:!0}):y[v]=d,window.PluginManager.register("TinectHlsVideoPlayerPlugin",b,"video")}},[["U6dU","runtime","vendor-node","vendor-shared"]]]);