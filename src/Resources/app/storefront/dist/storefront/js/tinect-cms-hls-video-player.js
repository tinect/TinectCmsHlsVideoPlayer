(window.webpackJsonp=window.webpackJsonp||[]).push([["tinect-cms-hls-video-player"],{U6dU:function(e,t,n){"use strict";n.r(t);var o=n("FGIj"),r=n("gHbT");function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"loadJavaScriptFile",value:function(e){return new Promise((function(t,n){var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=e,o.onload=t,o.onerror=n,document.head.appendChild(o)}))}},{key:"loadExternalModule",value:function(e,t){if(window[e])"function"==typeof t&&t();else if(window.tinectLazyloadJavascripts){var n=window.tinectLazyloadJavascripts[e];n?this.loadJavaScriptFile(n).then((function(){window[e]?"function"==typeof t&&t():console.error("Module cannot be loaded",e)})).catch((function(t){console.error("There was an error loading the external javascript file",e,t)})):console.error("There is no url set for module",e)}else console.error("Variable tinectLazyloadJavascripts missing",e)}}],(n=null)&&a(t.prototype,n),o&&a(t,o),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y,v,d,b=function(e){function t(){return u(this,t),s(this,f(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(o=[{key:"init",value:function(){var e=this,t=this;i.loadExternalModule("Plyr",(function(){i.loadExternalModule("Hls",(function(){new IntersectionObserver((function(t,n){t.forEach((function(t){t.intersectionRatio<=0||(n.unobserve(t.target),e._install(t.target))}))})).observe(t.el)}))}))}},{key:"_install",value:function(e){var t=this,n={controls:["play-large"]};r.a.hasAttribute(e,"autoplay")&&(e.removeAttribute("preload"),n.autoplay=!0),r.a.hasAttribute(e,"loop")&&(n.loop={active:!1});var o=r.a.getDataAttribute(e,"playlist",!1);if(Hls.isSupported()){var a={capLevelToPlayerSize:!0};"none"===r.a.getAttribute(e,"preload",!1)&&(a.autoStartLoad=!1);var i=new Hls(a);i.loadSource(o),i.attachMedia(e),i.currentLevel=-1;var l=null;i.on(Hls.Events.MANIFEST_PARSED,(function(){var o=i.levels.map((function(e){return e.height}));o.unshift(0),n.quality={default:0,options:o,forced:!0,onChange:function(e){t.updateQuality(i,e)}},i.currentLevel=-1,t.initPlayer(e,n).on("play",(function(){i.startLoad()})),(l=document.querySelector(".plyr__controls [data-plyr='quality'][value='0'] span")).innerHTML="Auto"})),i.on(Hls.Events.LEVEL_SWITCHED,(function(e,t){if(l)if(i.autoLevelEnabled){var n=i.levels[t.level].height;l.innerHTML="Auto ("+n+"p)"}else l.innerHTML="Auto"}))}else e.src=o,t.initPlayer(e,n)}},{key:"initPlayer",value:function(e,t){return new Plyr(e,t)}},{key:"updateQuality",value:function(e,t){0===t?e.currentLevel=-1:e.levels.forEach((function(n,o){n.height===t&&(e.currentLevel=o)}))}}])&&c(n.prototype,o),a&&c(n,a),t}(o.a);d={},(v="options")in(y=b)?Object.defineProperty(y,v,{value:d,enumerable:!0,configurable:!0,writable:!0}):y[v]=d,window.PluginManager.register("TinectHlsVideoPlayerPlugin",b,"video")}},[["U6dU","runtime","vendor-node","vendor-shared"]]]);